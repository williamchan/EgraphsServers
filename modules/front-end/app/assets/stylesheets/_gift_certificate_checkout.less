// Styles for the gift certificate checkout page

.giftCertificates() {
  //
  // Variables
  //
  @sectionSeparator: 1px solid lighten(@gray, 50%);
  @headerColor: #4d4d4d;

  //
  // Mixins
  //
  .certificatePreviews(@imageWidth) {
    @previewOverlap: .7368;
    .previews {
      position:relative;
      width: @imageWidth * 2 - @previewOverlap;

      .preview {
        width:@imageWidth;
        background-color:white;
        .box-shadow(1px 1px 6px lighten(black, 60%));

        &.foreground {
          position:relative;
          z-index: 1;
        }

        &.background {
          position:absolute;
          top: -.0526 * @imageWidth;
          left: @previewOverlap * @imageWidth;
          .rotate(3deg);
        }

        embed {
          // We stupidly have to concretely specify height because Safari 
          // doesn't scale the svg's height properly.
          width: 100%;
          height: 1.2947 * @imageWidth;
        }
      }

      position:relative;
    }
  }

  //
  // Rules
  //
  #content.gift-certificate-checkout, .gift-certificate-modal {
    .checkout-step-count {
      position:relative;
      margin-right:7px;
      padding-top:0px;
      padding-bottom:0px;
      padding-left:5px;
      padding-right:5px;
      border-radius:100px;
      background-color:@orange;
      color:@white;
      
      font-size:16px;
      font-weight:600;

      &.one {
        padding-left:7px;
        padding-right:7px;
      }
    }

    section {
      border-bottom:@sectionSeparator;
      .box-shadow(0px 1px 0px white);
      padding-top:7px;
      padding-bottom:15px;

      &.first {
        border-top: none;
      }

      .control-label {
        text-align: left;
      }
    }

    h2 {
      color:@headerColor;
      text-transform: uppercase;
      font-size:16px;
      font-weight:600;
      margin-bottom:15px;
    }

    .hint {
      color:#808080;
      font-size:14px;
      font-weight:300;
      line-height:normal;
    }

    #masthead {
      margin-top:40px;

      h1 {
        text-align:top;
        font-size:40px;
        font-weight:100;
      }

      ul {
        color:#808080;
        padding-top:30px;
        font-size:14px;
        font-weight:300;
        
        li {
          line-height:18px;
          list-style-type:circle;
        }

        strong {
          font-weight:normal;
          font-style:italic;
          color:@orange;
        }
      }

      .certificatePreviews(190px);

      .responsive-previews {
        display:none;

        margin-top:15px;
      }
    }

    #choose-amount {
      .amount-option {
        position:relative;

        button.btn {
          border-radius:0px;
          position:relative;
          .buttonBackground(lighten(@gray, 60%), lighten(@gray, 45%));
          color: #333;
          height:70px;
          width:100%;
          text-transform:uppercase;
          font-weight:300;
          font-size:36px;

          .dollah {
            position:relative;
            vertical-align:super;
            top:3px;
            font-size:22px;
          }

          &:hover {
            border:1px solid @orange;
          }

          &.active, &:active {
            .gradientBar(@orange, lighten(@orange, 10%));
            *background-color: @orange;
            .reset-filter();
            color:white;
            text-shadow: 0px -1px 0px black;
          }
        } // End button.btn

        &.own-amount {
          button.btn {
            font-size:20px;
          }

          #amount-field {
            position:relative;
            display:inline-block;
            float:right;
            margin-top:15px;

            .dollah {
              position:relative;
              top:-1px;
              color:#333;
              font-size:20px;
              padding-right:7px;
            }

            input {
              max-width:70px;
            }
          }
        }
      } // End .amount-option

      .hint {
        padding-top:4px;
        text-align:center;
      }

    } // End .choose-amount

    #personalize {
      border-bottom:0px;
      .box-shadow(none);

      h2 {
        margin-bottom:0px;
      }

      .control-group {
        margin-right:10px;
        input {
          width:100%;
        }
      }


      .hint {
        margin-bottom: 12px;
      }
    }

    #pay {
      padding-left:@fluidGridGutterWidth;
      border-bottom:none;
      border-left: @sectionSeparator;
      .box-shadow(1px 0px 0px white inset);

      .control-group {
        margin-right:10px;
      }

      input {
        width:100%;
      }

      input#card-cvc, input#postal-code {
        max-width:50px;
      }
    }

    &#review {
      .box-shadow(0px 0px 8px rgba(0,0,0,0.3));
      border:1px solid #AAA;
      border-radius: 0px;
      color: @grayLight;
      font-size:14px;
      line-height:normal;

      h2, h3 {
        color:@headerColor;
      }

      h2 {
        margin-bottom:0px;
        line-height:29px;
      }

      h3 {
        text-transform:uppercase;
        font-size:14px;
        font-weight:600;
        line-height:normal;
      }

      .modal-header {
        border-bottom:@sectionSeparator;
      }

      .modal-body {
        border-top:1px solid white;
        background: rgba(250,250,250,1);
      }

      .summary-item {
        font-weight:600;
      }

      .purchaser-summary {
        .card-number-placeholder {
          font-weight:normal;
        }

        .billing {
          margin-top:10px;
        }
      }

      .price-summary {
        margin-top:10px;

        table {
          width: 100%;

          th, td {
            font-weight:600;
            text-transform:uppercase;
          }

          th {
            text-align:left;
            width:50%;
          }

          td {
            text-align:right;
            width:50%;
          }

          .last td, .last th {
            
          }

          #total td, #total th {
            color:@headerColor;
          }
        }
      }

      .modal-body-separator {
        border-top:@sectionSeparator;
        .box-shadow(0px 1px 0px white);
        position:relative;
        width:300px;
        left:-15px;
        margin-top:12px;
        margin-bottom:12px;
      }
    }

  } // End #content


  @media (max-width:767px) { #content.gift-certificate-checkout, .gift-certificate-modal  {
    .controls {
      // Eliminate artifactual input expansion outside of grid due to spanning at
      // 100%
      margin-right:10px;

      input[type="text"] {
        width:100%;
      }
    }

    #masthead {
      margin-top:20px;

      .previews {
        margin-left:auto;
        margin-right:auto;
      }

      .desktop-previews {
        display:none;
      }

      .responsive-previews {
        display:block;
      }

    }

    #choose-amount {
      .amount-option {
        // Space out the buttons once they snap to vertical alignment
        margin-bottom: 10px;
      }
    }

    #personalize {
      border-bottom:@sectionSeparator;
      .box-shadow(0px 1px 0px white);
    }
  }} // End 767px Media

  @media (max-width:480px) { #content.gift-certificate-checkout, .gift-certificate-modal {
    #masthead {
      .certificatePreviews(150px);
    }
  }} // End 480px Media
} // End .giftCertificates()

.giftCertificates();