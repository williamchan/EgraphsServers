@(verticalViewModels: List[models.frontend.marketplace.VerticalViewModel])

@displayVerticals(verticals: List[models.frontend.marketplace.VerticalViewModel]) = {
  @for(vertical <- verticals) {
  <h2>@vertical.publicName</h2>
    <ol>
      @for(category <- vertical.categoryViewModels) {
        <li>
         <a class="category" data-category="@category.id">@category.publicName</a>
          @if(category.active){<a data-category="@category.id" class="clear-all">(Clear All)</a>}
            <ol>
              @for((categoryValue, idx) <- category.categoryValues.sorted.zipWithIndex) {
                <li>
                  <a class="cv-link @if(categoryValue.active){active}" title="" data-category="@category.id" data-categoryvalue="@categoryValue.id" data-vertical="@vertical.urlSlug">
                  @if(categoryValue.active){<i>&times;</i> <span>@categoryValue.publicName</span> } else {
                    @categoryValue.publicName
                  }
                  </a>
                </li>
              }
            </ol>
        </li>
      }
    </ol>
  }
}
  

@{val verticalsFilteredOption = verticalViewModels.filter(v => v.active).headOption
  displayVerticals(verticalsFilteredOption match {
    case None => verticalViewModels
    case Some(vertical) => List(vertical)
  })
}
