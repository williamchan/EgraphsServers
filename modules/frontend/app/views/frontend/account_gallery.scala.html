@(username: String, egraphs: List[models.frontend.egraphs.EgraphViewModel], controlRenderer: models.frontend.egraphs.GalleryControlRenderer)

@fulfilledEgraph(egraph: models.frontend.egraphs.FulfilledEgraphViewModel, index: Int) = {
  <div class="row-fluid row-egraph">
    <div class="span12">
      <div class="number">@(index+1)</div><br>
      <span>
        <h3>@egraph.productTitle</h3>
      </span>
    </div>
    <div class="row-fluid">
      <div class="span7">
        <figure class="@egraph.orientation">
          <img src="@egraph.thumbnailUrl"></img>
        </figure>
      </div>
      <div class="span5 right">
        <div>
          @egraph.productUrl<br>
          Signed @egraph.signedTimestamp
        </div>
        <div>
          <p>@egraph.productDescription</p>
        </div>
        <div class="padding-fix">
          <div class="social">
            <ul class="clearfix">
              <li><span class="social-label">Share this</span></li>
              <li><a href="#" class="facebook">Facebook</a></li>
              <li><a href="https://twitter.com/egraphs" class="twitter">Twitter</a></li>
              <!-- <li><a href="#" class="addthis">AddThis</a></li> -->
            </ul>
          </div>
        </div>
        <div class="controls">
          @Html(controlRenderer.render(egraph.orderId, egraph.publicStatus).toString())
        </div>
      </div>
    </div>
  </div>
}

@pendingEgraph(egraph: models.frontend.egraphs.PendingEgraphViewModel, orderDetails: models.frontend.egraphs.OrderDetails, index: Int) = {
  <div class="row-fluid row-egraph">
    <div class="span12">
      <div class="number">@(index+1)</div>
      <br>
      <span>
        <h3>@egraph.productTitle</h3><span class="order-line"> &nbsp;Pending Order</span>
      </span>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
    <figure>
      <img src="@egraph.thumbnailUrl">
      </img>
    </figure>
    </div>
    <div class="span6">
      <div class="order-row">
        <span class="order-label">Order Date</span><span class="order-detail"> @orderDetails.orderDate</span>
      </div>
      <div class="order-row">
        <span class="order-label">Order Number</span><span class="order-detail">@orderDetails.orderNumber</span>
      </div>
      <div class="order-row">
        <span class="order-label">Price</span><span class="order-detail"> @orderDetails.price</span>
      </div>
    </div>
    <div class="span3 shipping-details">
      <span>Status: </span>@orderDetails.statusText<br>
      <span>Shipping: </span>@orderDetails.shippingMethod<br>
      <span>UPS Tracking Number: </span>@orderDetails.UPSNumber<br>
    </div>
  </div>
}
@baseBody = {
  <section id="content">
    <div id="main">
      <div class="container">
        <header>
          <h1>My Gallery</h1>
          <div class="row-fluid">
            <span class="span8"> @username's Egraphs</span>
            <span class="span4 count">
              <strong>@egraphs.length Egraphs</strong> /
              <strong>@{egraphs.filter(egraph => egraph.isInstanceOf[models.frontend.egraphs.PendingEgraphViewModel]).length}</strong>
              Pending, <strong>@{egraphs.filter(egraph => egraph.isInstanceOf[models.frontend.egraphs.FulfilledEgraphViewModel]).length}</strong>
              Finished</span>
          </div>
        </header>
        @if(egraphs.length == 0) {
          <section>
            <h1>
              DERP DERP @username doesn't have any egraphs...
            </h1>
          </section>
        }
        <section id="galleryrows">
        @for((egraph,index) <- egraphs.zipWithIndex){
          @{egraph match {
            case e: models.frontend.egraphs.PendingEgraphViewModel => pendingEgraph(e, e.orderDetails, index)
            case e: models.frontend.egraphs.FulfilledEgraphViewModel => fulfilledEgraph(e, index)
            case _ => ""
          }
          }
        }
        </section>
      </div>
    </div>
  </section>
}

@base_template(
title="Gallery",
jsMain="pages/landing",
body=baseBody
)