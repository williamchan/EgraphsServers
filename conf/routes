# Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

###
### Test routes
###
%{ if (play.id == "test") }%

GET     /test/scenarios                          nonproduction.ScenarioController.list
GET     /test/scenarios/clear                    nonproduction.ScenarioController.clear
GET     /test/scenarios/{urlSlug}                nonproduction.ScenarioController.scenario
GET     /test/pages/egraph                       nonproduction.TestControllers.getHardwiredEgraphPage

GET     /demo-setup/list                         nonproduction.DemoSetupController.list
GET     /demo-setup/clear                        nonproduction.DemoSetupController.clear
GET     /demo-setup/{urlSlug}                    nonproduction.DemoSetupController.demoScenario

GET     /admin/reset-alpha-state                 nonproduction.TestControllers.resetAlphaState

GET     /test/request-transaction/without-error  nonproduction.TransactionTestController.makeAccount
GET     /test/request-transaction/with-error     nonproduction.TransactionTestController.makeAccountAndThrowException
GET     /test/request-transaction/is-stored      nonproduction.TransactionTestController.isStored
GET     /test/log-stuff-then-die                 nonproduction.TestControllers.logStuffThenThrowException

###
### Production routes
###

##
## Defaults
##
%{ if (true) }%
# Home page
GET     /                                       WebsiteControllers.getRootEndpoint

# For Alpha-phase prod mode:

GET     /test/script                            nonproduction.TestControllers.script
GET     /test/create-test-orders                nonproduction.TestControllers.createTestOrders
GET     /test/files/{<.*>blobKey}               WebsiteControllers.getBlob

# Map static resources from the /app/public folder to the /public path
GET     /public/                                staticDir:public
GET     /favicon.ico                            staticFile:/public/images/favicon.ico

##
## API
##
%{ api = '/api/1.0' }%

GET     ${api}/celebrities/{celebrityId}                          ApiControllers.getCelebrity
GET     ${api}/celebrities/{celebrityId}/enrollmenttemplate       ApiControllers.getCelebrityEnrollmentTemplate
GET     ${api}/celebrities/{celebrityId}/products                 ApiControllers.getCelebrityProducts
GET     ${api}/celebrities/{celebrityId}/orders                   ApiControllers.getCelebrityOrders
POST    ${api}/celebrities/{celebrityId}/enrollmentsamples        ApiControllers.postEnrollmentSample
POST    ${api}/celebrities/{celebrityId}/orders/{orderId}/egraphs ApiControllers.postEgraph

##
## Admin
##
GET     /admin/login                                      WebsiteControllers.getAdminLogin
POST    /admin/login                                      WebsiteControllers.postAdminLogin
POST    /admin/logout                                     WebsiteControllers.postAdminLogout
GET     /admin/celebrities                                WebsiteControllers.getCelebrities
POST    /admin/celebrities                                WebsiteControllers.postCelebrity
GET     /admin/celebrities/create                         WebsiteControllers.getCreateCelebrity
GET     /admin/celebrities/{celebrityId}/products         WebsiteControllers.getCelebrityProducts
POST    /admin/celebrities/{celebrityId}/products         WebsiteControllers.postCelebrityProduct
GET     /admin/celebrities/{celebrityId}/products/create  WebsiteControllers.getCreateCelebrityProduct
GET     /admin/egraphs                                    WebsiteControllers.getEgraphs
GET     /admin/celebrities/{celebrityId}/egraphs          WebsiteControllers.getCelebrityEgraphs
GET     /admin/celebrities/{celebrityId}/orders           WebsiteControllers.getCelebrityOrders

##
## Website
##

# Order and Egraph pages
GET     /orders/{<[0-9]+>orderId}/confirm                WebsiteControllers.getOrderConfirmation
GET     /egraph/{<[0-9]+>orderId}                        WebsiteControllers.getEgraph

# Celebrity pages
GET     /{celebrityUrlSlug}                      WebsiteControllers.getCelebrity
GET     /{celebrityUrlSlug}/{productUrlSlug}     WebsiteControllers.getCelebrityProduct
POST    /{celebrityUrlSlug}/{productUrlSlug}/buy WebsiteControllers.postBuyProduct
POST    /{celebrityUrlSlug}/{productUrlSlug}/buy-demo WebsiteControllers.postBuyDemoProduct
