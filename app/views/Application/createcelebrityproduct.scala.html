@(celebrity: models.Celebrity, errorFields: Option[List[String]], fields: (String) => String)

@import controllers.WebsiteControllers
@import services.Utils.lookupUrl

@content_base(title="Admin - Create Product", body=body, head=head)

@head = {
<script src='@asset("public/twitter-bootstrap-1.4.0/js/bootstrap-alerts.js")' type="text/javascript"></script>
}

@alertMessageClass = @{
errorFields match {
case None => ""
case Some(_) => "alert-message-has-errors"
}
}

@errorMessage = {
@errorFields.map { realErrors =>
Required fields are either missing or invalid. Please fix and resubmit.
<ul>
  @realErrors.map { theError =>
  <li>@theError</li>
  }
</ul>
}
}

@celebrityIdMap = @{
Map("celebrityId" -> celebrity.id.toString)
}

@postProduct = @{
lookupUrl("WebsiteControllers.postCelebrityProduct", celebrityIdMap)
}

@formField(id: String,
label: String,
inputType: String,
width: String,
help: Option[Html] = None,
hasInputName: Boolean=true) = {

@nameAttribute = {
@if(hasInputName) {
name="@id"
}
}

<div class="clearfix">
  <label for="@id">@label</label>
  <div class="input">
    <input class="@width" id="@id" @nameAttribute type="@inputType" value="@fields(id)" >
    @help.map { htmlString =>
    <span class="help-block">@htmlString</span>
    }
  </div>
</div>
}

@body = {
<div class="admin-content">
  <h2>
    Create Product for @celebrity.publicName.get
  </h2>
  <div class="form row">
    <div class="span12 form-column">
      <form id="product-form" method="POST" action='@postProduct' enctype="multipart/form-data">
        <fieldset>
          <legend>Product info</legend>

          @formField(id="productName", label="Product Name", inputType="text", width="span4")

          @formField(id="productDescription", label="Product Description", inputType="text", width="span4")

          @formField(id="productImage", label="Product Photo", inputType="file", width="span8", help=Some(profileHelp))
          @profileHelp = { Must be JPG or PNG with minimum dimensions of 940x900. Will be cropped. }

          <div class="actions">
            <button type="submit" id="submit-button" class="btn large primary fade in">Create Product</button>
            <div class="form-errors alert-message block-message error @alertMessageClass">
              @errorMessage
            </div>
          </div>
        </fieldset>
      </form>
    </div>
  </div>
</div>
}
