@(isCreate: Boolean, celebrity: models.Celebrity, errorFields: Option[List[String]], fields: (String) => String, inventoryBatch: Option[models.InventoryBatch] = None, products : Iterable[(models.Product, Boolean)]
)(implicit session: play.mvc.Scope.Session)

@import controllers.WebsiteControllers
@import services.Finance.TypeConversions._
@import services.Utils.lookupUrl
@import views.Application.tags.html.authenticityToken
@import views.Application.tags.html.errorMessage
@import views.Application.html.content_base
@import views.Application.tags.html.formField

@content_base(title="Admin - Inventory Batch Details", body=body, head=head)

@head = {
<script src='@asset("public/twitter-bootstrap-1.4.0/js/bootstrap-alerts.js")' type="text/javascript"></script>
}

@postInventoryBatch = @{
  lookupUrl("WebsiteControllers.postCelebrityInventoryBatchAdmin", Map("celebrityId" -> celebrity.id.toString))
}

@body = {
<div class="admin-content">
  <h1>
    @celebrity.publicName.get - @{if(isCreate) "Create" else "Update"} Inventory Batch
  </h1>
  <div class="form row">
    <div class="span12 form-column">
      <form id="inventorybatch-form" method="POST" action='@postInventoryBatch' enctype="multipart/form-data">
        <fieldset>
          @authenticityToken()
          <input id="inventoryBatchId" name="inventoryBatchId" type="hidden" value="@fields("inventoryBatchId")">
          <legend>Inventory Batch Details</legend>

          @formField(
            id="numInventory",
            label="Inventory Amount",
            inputType="text",
            width="span4",
            fields=fields
          )

          @formField(
            id="startDate",
            label="Start Date",
            inputType="text",
            width="span4",
            help=Some(Html("yyyy-mm-dd")),
            fields=fields
          )

          @formField(
            id="endDate",
            label="End Date",
            inputType="text",
            width="span4",
            help=Some(Html("yyyy-mm-dd")),
            fields=fields
          )
        </fieldset>
        <fieldset>
          <legend>Associated Products</legend>
          <table>
            <tr>
              <td>Associate?</td>
              <td>Id</td>
              <td>Name</td>
              <td>Price</td>
            </tr>
            @products.map { case (product, isAssociated) =>
            <tr>
              <td><input type="checkbox" name="@("prod" + product.id)" value="checked" @if(isAssociated){checked="true"} /></td>
              <td>@product.id</td>
              <td>@product.name</td>
              <td>@product.price.formatSimply</td>
            </tr>
            }
          </table>

          <div class="actions">
            <button type="submit" id="submit-button" class="btn primary fade in">Save</button>
            <button type="reset" id="reset-button" class="btn primary fade in">Reset</button>
            @errorMessage(errorFields)
          </div>
        </fieldset>
      </form>
    </div>
  </div>
</div>
}
