@(celebrityAccounts: org.squeryl.Query[(models.Celebrity, models.Account)]
)(implicit flash:play.mvc.Scope.Flash)

@import controllers.WebsiteControllers
@import services.Utils.lookupUrl
@import views.Application.html.content_base

@content_base(title="Admin - Celebrities", body=body, head=head)

@getCreateCelebrity = @{
  lookupUrl("WebsiteControllers.getCreateCelebrity")
}

@postAdminLogout = @{
  lookupUrl("WebsiteControllers.postAdminLogout")
}

@head = {
<script src='@asset("public/twitter-bootstrap-1.4.0/js/bootstrap-alerts.js")' type="text/javascript"></script>
}

@body = {
<div class="admin-content">
  <form id="logout" method="POST" action='@postAdminLogout' enctype="application/x-www-form-urlencoded">
    <div>
      <button type="submit" id="logout-button" class="btn fade in">Logout</button>
    </div>
  </form>
  <h2>
    All Celebrities @flash.get("TotalResultsStr")
  </h2>
  <form method="link" action="@getCreateCelebrity">
    <input class="btn primary fade in" type="submit" value="New Celebrity"/>
  </form>
  <table>
    <tr>
      <th>Id</th>
      <th>Email</th>
      <th>Public Name</th>
      <th>First</th>
      <th>Last</th>
      <th>Enrollment Status</th>
      <th>Products</th>
      <th>Orders</th>
      <th>Egraphs</th>
    </tr>
    @celebrityAccounts.map { case (celebrity, account) =>
    <tr>
      <td>@celebrity.id</td>
      <td>@account.email</td>
      <td>
        <a class="preview-link" href="/@celebrity.urlSlug">
          @celebrity.publicName
        </a>
      </td>
      <td>@celebrity.firstName</td>
      <td>@celebrity.lastName</td>
      <td>@celebrity.enrollmentStatusValue</td>
      <td>
        <a class="preview-link" href="/admin/celebrities/@celebrity.id/products">
        Products
        </a>
      </td>
      <td>
        <a class="preview-link" href="/admin/celebrities/@celebrity.id/orders">
          Orders
        </a>
      </td>
      <td>
        <a class="preview-link" href="/admin/celebrities/@celebrity.id/egraphs">
          Egraphs
        </a>
      </td>
    </tr>
    }
  </table>
  <div class="pagination">
    @if( flash.get("ShowPaging").toBoolean) {
    <ul>
      <li @if( !flash.get("ShowFirst").toBoolean ) {class="disabled"}><a href="@flash.get("FirstUrl")">First</a></li>
      <li @if( !flash.get("ShowPrev" ).toBoolean ) {class="disabled"}><a href="@flash.get("PrevUrl") ">Prev</a></li>
      <li @if( !flash.get("ShowNext" ).toBoolean ) {class="disabled"}><a href="@flash.get("NextUrl") ">Next</a></li>
      <li @if( !flash.get("ShowLast" ).toBoolean ) {class="disabled"}><a href="@flash.get("LastUrl") ">Last</a></li>
    </ul>
    }
  </div>
</div>
}
