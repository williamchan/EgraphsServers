#!/bin/bash
#
# Checks out the latest version of the project tagged as suitable for local
# demoing from the project's repository.
#
# NOTE: You should _not_ change the name of this file unless you have access
#   to all the demo laptops that use it; they will be using the file to jump
#   between various versions of the project and in order to enable that
#   the file's name must be consistent.
#

SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
PROJ_BASE=$SCRIPT_DIR/..

cd $PROJ_BASE

# Since local demo tags as generated by tools/tag-for-local-demo are
# organized lexicographically according to timestamp and 'git tag -l'
# returns the tags in lexigraphic order, the order of tags will be
# chronological. So we grab the last line from 'git tag -l'.
latest_demo_tag=`git tag -l 'local-demo*' | tail -1`

echo "Checking out \"$latest_demo_tag\""
git checkout "$latest_demo_tag"