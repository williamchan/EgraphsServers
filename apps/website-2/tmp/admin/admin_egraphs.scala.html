@(egraphAndResults: Iterable[(models.Egraph, Option[models.vbg.VBGVerifySample], Option[models.xyzmo.XyzmoVerifyUser])], celebrity: Option[models.Celebrity] = None
)(implicit flash:play.mvc.Scope.Flash)

@import controllers.WebsiteControllers
@import views.html.Application.tags.pagination
@import views.html.Application.content_base

@content_base(title="Admin - All Egraphs", body=body, head=head)

@head = {
<script src='@routes.RemoteAssets.at("twitter-bootstrap-1.4.0/js/bootstrap-alerts.js")' type="text/javascript"></script>
}

@headline = {
  @if(celebrity.isDefined) {@celebrity.get.publicName's Egraphs} else {Egraphs}
}

@body = {
<div class="admin-content">
  <h1>
    @headline @flash.get("TotalResultsStr")
  </h1>
  <div>
    <h2>Filters:</h2>
    <ul class="span16">
      <li><a href="?filter=pendingAdminReview">Pending Admin Review</a></li>
      <li><a href="?filter=passedBiometrics">Pass Biometrics</a></li>
      <li><a href="?filter=failedBiometrics">Failed Biometrics</a></li>
      <li><a href="?filter=approvedByAdmin">Approved by Admin</a></li>
      <li><a href="?filter=rejectedByAdmin">Rejected by Admin</a></li>
      <li><a href="?filter=awaitingVerification">Awaiting Verification</a></li>
      <li><a href="?filter=published">Published</a></li>
      <li><a href="?filter=all">All</a></li>
    </ul>
  </div>
  <table>
    <tr>
      <th></th>
      <th>Id</th>
      <th>State</th>
      <th>Order Id</th>
      <th>Signature Result</th>
      <th>Voice Result</th>
      <th>Voice Code</th>
      <th>Voice TxnId</th>
    </tr>
    @egraphAndResults.map { case (egraph, vbgVerifySample, xyzmoVerifyUser) =>
    <tr>
      <td>
        <a class="preview-link" href="/admin/egraphs/@egraph.id">
          Details
        </a>
      </td>
      <td>@egraph.id</td>
      <td>@egraph.egraphState</td>
      <td>@egraph.orderId</td>
      <td>@if(xyzmoVerifyUser.isDefined) {@xyzmoVerifyUser.get.resultStr} else {}</td>
      <td>@if(vbgVerifySample.isDefined) {@vbgVerifySample.get.resultStr} else {}</td>
      <td>@if(vbgVerifySample.isDefined) {@vbgVerifySample.get.errorCode} else {}</td>
      <td>@if(vbgVerifySample.isDefined) {@vbgVerifySample.get.vbgTransactionId} else {}</td>
    </tr>
    }
  </table>
  @pagination()
</div>
}
