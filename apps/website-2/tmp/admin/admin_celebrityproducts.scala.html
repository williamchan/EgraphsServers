@(celebrity:models.Celebrity,
  products: Iterable[models.Product]
)(implicit flash:play.mvc.Scope.Flash)

@import controllers.WebsiteControllers
@import services.Finance.TypeConversions._
@import services.Utils.lookupUrl
@import views.html.Application.tags.pagination
@import views.html.Application.content_base

@content_base(title="Admin - Products", body=body, head=head)

@getCreateCelebrityProduct = @{
  lookupUrl("WebsiteControllers.getCreateCelebrityProductAdmin", Map("celebrityId" -> celebrity.id.toString))
}

@head = {
<script src='@RemoteAssets.at("twitter-bootstrap-1.4.0/js/bootstrap-alerts.js")' type="text/javascript"></script>
}

@body = {
<div class="admin-content">
  <h1>
    @celebrity.publicName's Products @flash.get("TotalResultsStr")
  </h1>
  <form method="link" action="@getCreateCelebrityProduct">
    <input class="btn primary fade in" type="submit" value="New Product"/>
  </form>
  <table>
    <tr>
      <th></th>
      <th>Id</th>
      <th>Name</th>
      <th>Price</th>
      <th>Description</th>
      <th>Published?</th>
    </tr>
    @products.map { (product) =>
    <tr>
      <td>
        <a class="preview-link" href="/admin/products/@product.id">
          Details
        </a>
      </td>
      <td>@product.id</td>
      <td>
        <a class="preview-link" href="/@celebrity.urlSlug/photos/@product.urlSlug">
          @product.name
        </a>
      </td>
      <td>@product.price.formatSimply</td>
      <td>@product.description</td>
      <td>@product.publishedStatus</td>
    </tr>
    }
  </table>
  @pagination()
</div>
}
