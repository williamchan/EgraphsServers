@(isCreate: Boolean, errorFields: Option[List[String]], fields: (String) => String, celebrity: Option[models.Celebrity] = None
)(implicit authToken: egraphs.authtoken.AuthenticityToken)

@import controllers.WebsiteControllers
@import egraphs.authtoken.AuthenticityToken.safeForm
@import views.html.Application.tags.errorMessage
@import views.html.Application.tags.formField
@import views.html.Application.content_base

@content_base(title="Admin - Celebrity Details", body=body, head=head)

@head = {
<script src='@RemoteAssets.at("twitter-bootstrap-1.4.0/js/bootstrap-alerts.js")' type="text/javascript"></script>
<script src='@RemoteAssets.at("twitter-bootstrap-1.4.0/js/bootstrap-buttons.js")' type="text/javascript"></script>
<script type="text/javascript">
    require(["admin-celebritydetail-page"], function(pageScripts) {
      pageScripts.go();
    })
</script>
}

@postSendCelebrityWelcomeEmailAdmin(celebrityId: Long) = @{
	routes.WebsiteControllers.postSendCelebrityWelcomeEmailAdmin(celebrityId = celebrityId)
}

@postCelebrity = @{
	null
}
@**
routes.WebsiteControllers.postCelebrityAdmin
*@

@profilePhoto = {
  @celebrity.map(c => c.profilePhoto.resizedWidth(80).getSaved(services.blobs.AccessPolicy.Public).url).getOrElse("")
}

@landingPageImage = {
  @celebrity.map(c => c.landingPageImage.resizedWidth(400).getSaved(services.blobs.AccessPolicy.Public).url).getOrElse("")
}

@logoImage = {
  @celebrity.map(c => c.logoImage.resizedWidth(40).getSaved(services.blobs.AccessPolicy.Public).url).getOrElse("")
}

@body = {
<div class="admin-content">
  <h1>
    @{if(isCreate) "Create" else "Update"} Celebrity
  </h1>
  <div class="form row">
    <div class="span12 form-column">
    	@safeForm('id -> "admin-celebrity-detail", 'method -> "POST", 'action -> "postCelebrity.url", 'enctype -> "multipart/form-data") {
        <fieldset>
          <input id="celebrityId" name="celebrityId" type="hidden" value="@fields("celebrityId")">
          <input id="publishedStatus" name="publishedStatusString" type="hidden" value="@fields("publishedStatusString")">
          <legend>Account Details</legend>
          @formField(id="celebrityEmail", label="E-mail address", inputType="text", editable=isCreate, width="span4", fields=fields)
          @formField(id="celebrityPassword", label="Password", inputType="text", editable=isCreate, width="span4", fields=fields)
        </fieldset>
        <fieldset>
          <legend>Celebrity Details</legend>
          @formField(id="publicName", label="Public Name", inputType="text", width="span4", fields=fields)

          @formField(id="casualName", label="Casual Name", inputType="text", width="span4", help=Some("e.g. \"David\" instead of \"David Price\""), fields=fields)

          @formField(id="organization", label="Organization", inputType="text", width="span4", help=Some("e.g. \"Major League Baseball\""), fields=fields)
          
          @formField(id="roleDescription", label="Role Description", inputType="text", width="span4", help=Some("e.g. \"Pitcher, Tampa Bay Rays\""), fields=fields)

        </fieldset>
          <div class="clearfix">
            <label for="bio">Short Bio</label>
            <div class="input">
              <textarea class="xlarge" id="bio" name="bio" rows="3">@fields("bio")</textarea>
            </div>
          </div>

          @formField(id="twitterUsername", label="Twitter Username", inputType="text", width="span4", fields=fields)

        </fieldset>
        <fieldset>
          <legend>Images</legend>
          @formField(id="profileImage", label="Profile Photo", inputType="file", width="span8", help=Some("Must be square dimensions of at least 100x100."), fields=fields)

          @formField(id="landingPageImage", label="Landing Page Image", inputType="file", width="span8", help=Some("Must be JPG at least 1500x556. Keep that 2.7 aspect ratio for best results. Should be center-balanced photo of celebrity."), fields=fields)

          @formField(id="logoImage", label="Team/Org Logo", inputType="file", width="span8", help=Some("Must be PNP of square dimensions of at least 40x40. Logo of team or organization."), fields=fields)

        </fieldset>
        <fieldset>
          <legend>Publish</legend>
          <button class="btn toggle" data-toggle="toggle" id="publish-button" type="button">Published</button>
          <div class="actions">
            <button type="submit" id="submit-button" class="btn primary fade in">Save</button>
            <button type="reset" id="reset-button" class="btn primary fade in">Reset</button>
            @errorMessage(errorFields)
          </div>
        </fieldset>
      }
      <div>
        @for(presentCelebrity <- celebrity) {
	        <hr/>
	        @safeForm('id -> "postSendCelebrityWelcomeEmail", 'method -> "POST", 'action -> postSendCelebrityWelcomeEmailAdmin(presentCelebrity.id).url) {
	          <fieldset>
	          @formField(id="celebrityEmail", label="E-mail address", inputType="text",
	            help = Some("Specify the email address for the welcome letter."), width="span4", fields=fields)
	          <div class="actions">
	            <input class="btn primary fade in" type="submit" value="Send Welcome Email"/>
	          </div>
	          </fieldset>
	        }
        }
      </div>
      <div class="span2 profile-thumbnail" >
        <legend>Current Profile</legend>
        <img src="@profilePhoto">
        <legend>Current Landing Page Image</legend>
        <img src="@landingPageImage">
        <legend>Current Logo</legend>
        <img src="@logoImage">
      </div>
    </div>
  </div>
</div>
}
